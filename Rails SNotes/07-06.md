# 7.6

登录和退出功能



应用维持登录状态 直至关闭浏览器

高级登录系统不会在关闭浏览器后清除登录状态



HTTP协议没有状态

每个请求都是独立的事务 无法使用之前请求中的信息

HTTP协议无法在两个页面中记录用户身份



会话是Web浏览器与Rails服务器之间的半永久性连接

Rails中实现会话最常见的方式为使用`cookie`



使用`session`方法实现临时对话

浏览器关闭后自动失效

`cookies`方法能够使会话持续时间更久



基于`Users`资源使用数据库存储数据

会话使用`cookie`



错误消息局部视图不能显示创建会话时的错误

因此使用闪现消息渲染登录时的错误消息



登录表单与注册表单

会话不是模型 因此无法创建实例变量



`form_with`方法在会话中需指明其URL与scope



创建会话时需先处理提交无效数据的情况

`create`动作中 `params`散列包含验证用户身份所需的全部数据

`Active Record`提供`User.find_by`方法

`has_secure_password`提供`authenticate`方法



渲染闪现消息